(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00cd3822"],{"2dcf":function(t,e,s){"use strict";s("a4eb")},"4a7a3":function(t,e,s){"use strict";s("7243")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var r=s("1d80"),a=s("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(r(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(i,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,s){var r=s("861d"),a=s("d2bb");t.exports=function(t,e,s){var n,o;return a&&"function"==typeof(n=e.constructor)&&n!==s&&r(o=n.prototype)&&o!==s.prototype&&a(t,o),t}},7243:function(t,e,s){},"7b8c":function(t,e,s){"use strict";s("f01c")},a4eb:function(t,e,s){},a9e3:function(t,e,s){"use strict";var r=s("83ab"),a=s("da84"),n=s("94ca"),o=s("6eeb"),i=s("5135"),c=s("c6b6"),l=s("7156"),u=s("c04e"),d=s("d039"),f=s("7c73"),p=s("241c").f,h=s("06cf").f,b=s("9bf2").f,v=s("58a8").trim,g="Number",m=a[g],w=m.prototype,y=c(f(w))==g,C=function(t){var e,s,r,a,n,o,i,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(n=l.slice(2),o=n.length,i=0;i<o;i++)if(c=n.charCodeAt(i),c<48||c>a)return NaN;return parseInt(n,r)}return+l};if(n(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var k,O=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof O&&(y?d((function(){w.valueOf.call(s)})):c(s)!=g)?l(new m(C(e)),s,O):C(e)},_=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j=0;_.length>j;j++)i(m,k=_[j])&&!i(O,k)&&b(O,k,h(m,k));O.prototype=w,w.constructor=O,o(a,g,O)}},b3be:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container thread"},[s("div",{staticClass:"row"}),s("ul",{staticClass:"list-group row"},t._l(t.postData,(function(e,r){return s("Post",{key:e.id+"+"+r,staticClass:"col col-12",attrs:{post:e,index:r+1,isModerator:t.isModerator},on:{deletePost:t.deletePost}})})),1),s("div",{staticClass:"row"},[s("div",{staticClass:"col col-12"},[s("new-post",{attrs:{user:this.user,isLocked:t.currentThread.isLocked},on:{sendDataToParent:t.makeNewPost}})],1)])])},a=[],n=(s("caad"),s("d3b7"),s("2532"),s("96cf"),s("1da1")),o=s("d4ec"),i=s("bee2"),c=s("262e"),l=s("2caf"),u=s("9ab4"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"post-info list-group-item container-fluid",class:{"list-group-item-info":t.post.isModeratorPost}},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col align-self-start col-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col align-self-start col-2"},[t.post.isModeratorPost?s("span",{staticClass:"material-icons"},[t._v("security")]):t._e()]),s("div",{staticClass:"col align-self-end col-10"},[s("strong",[t._v(t._s(t.post.timestamp))])])])]),s("div",{staticClass:"col align-self-end offset-7 col-2"},[s("p",{staticClass:"text-right"},[t._v("#"+t._s(t.index))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col align-self-start col-3"},[t._v(t._s(t.post.username))]),s("div",{staticClass:"col col-8"},[s("p",{staticClass:"text-left"},[t._v(t._s(t.post.content))])]),s("div",{staticClass:"col col-1 text-right"},[t.isModerator?s("span",{staticClass:"material-icons delete-icon",on:{click:function(e){return t.deletePost(t.post.id)}}},[t._v("delete")]):t._e()])])])},f=[],p=(s("a9e3"),s("2b0e")),h=s("60a3"),b=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){return Object(o["a"])(this,s),e.apply(this,arguments)}return Object(i["a"])(s,[{key:"deletePost",value:function(t){this.$emit("deletePost",t)}}]),s}(p["a"]);Object(u["a"])([Object(h["b"])({type:Object})],b.prototype,"post",void 0),Object(u["a"])([Object(h["b"])({type:Number})],b.prototype,"index",void 0),Object(u["a"])([Object(h["b"])({type:Boolean,default:!1})],b.prototype,"isModerator",void 0),b=Object(u["a"])([h["a"]],b);var v=b,g=v,m=(s("4a7a3"),s("2877")),w=Object(m["a"])(g,d,f,!1,null,"24f1a10a",null),y=w.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"new-post-wrapper"},[s("fieldset",[t._m(0),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control content-text",attrs:{rows:"5",disabled:t.isGuest||t.locked,required:""},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col col-5 offset-7"},[s("div",{staticClass:"row"},[t.isModerator?s("div",{staticClass:"col col-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.warning,expression:"warning"}],attrs:{type:"checkbox",id:"moderatorCheckbox",disabled:t.isGuest||t.locked},domProps:{checked:Array.isArray(t.warning)?t._i(t.warning,null)>-1:t.warning},on:{change:function(e){var s=t.warning,r=e.target,a=!!r.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);r.checked?o<0&&(t.warning=s.concat([n])):o>-1&&(t.warning=s.slice(0,o).concat(s.slice(o+1)))}else t.warning=a}}}),s("label",{staticClass:"form-check-label pl-1",attrs:{for:"moderatorCheckbox"}},[t._v("Mark as warning post ")])]):t._e(),s("div",{staticClass:"col col-4 ",class:{"offset-8":!t.isModerator}},[s("button",{staticClass:"btn btn-info float-right",attrs:{disabled:t.isGuest||t.locked,type:"submit"},on:{click:t.createPost}},[s("i",{staticClass:"material-icons align-middle"},[t._v("send")]),t._v(" Send ")])])])])])])])])},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("legend",{staticClass:"header"},[s("h2",{staticClass:"text-left"},[t._v(" New Post ")])])}],O=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(o["a"])(this,s),t=e.apply(this,arguments),t.content="",t.warning=!1,t}return Object(i["a"])(s,[{key:"createPost",value:function(){this.$emit("sendDataToParent",{content:this.content,warning:this.warning}),this.$store.dispatch("fetchPostsWithThreadId",this.$route.params.thread)}},{key:"isModerator",get:function(){return this.$store.getters["isModerator"]}},{key:"isGuest",get:function(){return this.user.roles.includes("guest")?(this.content="Log in to join the conversation",!0):(this.content="",!1)}},{key:"locked",get:function(){return 1===Number(this.isLocked)}}]),s}(p["a"]);Object(u["a"])([Object(h["b"])({type:Object})],O.prototype,"user",void 0),Object(u["a"])([Object(h["b"])({type:Number,default:1})],O.prototype,"isLocked",void 0),O=Object(u["a"])([h["a"]],O);var _=O,j=_,N=(s("7b8c"),Object(m["a"])(j,C,k,!1,null,"f3b1fefe",null)),x=N.exports,P=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(o["a"])(this,s),t=e.apply(this,arguments),t.showModal=!0,t}return Object(i["a"])(s,[{key:"deletePost",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch("deletePost",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"makeNewPost",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.user.roles.includes("user")){t.next=2;break}return t.abrupt("return");case 2:return s={content:e.content,userId:this.user.id,threadId:this.$route.params.thread,isModeratorPost:e.warning},t.next=5,fetch("/api/posts",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify(s)}).then((function(t){if(201===t.status)return t.json();400===t.status&&console.error("Error when creating a new post")})).catch((function(t){return console.error(t)}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.$store.dispatch("fetchPostsWithThreadId",this.$route.params.thread),this.$store.dispatch("fetchCurrentThread",this.$route.params.thread)}},{key:"postData",get:function(){return this.$store.state.posts||[]}},{key:"user",get:function(){return this.$store.state.currentUser}},{key:"currentThread",get:function(){return this.$store.state.currentThread}},{key:"isModerator",get:function(){return this.$store.getters["isModerator"]}}]),s}(p["a"]);P=Object(u["a"])([Object(h["a"])({components:{Post:y,NewPost:x}})],P);var I=P,$=I,E=(s("2dcf"),Object(m["a"])($,r,a,!1,null,"149402d1",null));e["default"]=E.exports},f01c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-00cd3822.00816da6.js.map