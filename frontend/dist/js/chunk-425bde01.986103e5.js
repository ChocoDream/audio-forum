(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-425bde01"],{"0ccf":function(t,e,r){},2475:function(t,e,r){"use strict";r("64e3")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),s="["+n+"]",o=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(i,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"64e3":function(t,e,r){},6954:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container subforum"},[t.isGuest?t._e():r("button",{staticClass:"btn btn-primary",on:{click:t.toggleModal}},[t._v(" New Thread ")]),r("ul",{staticClass:"list-group"},t._l(t.threadData,(function(e,a){return r("li",{key:e+"+"+a,staticClass:"list-group-item item",on:{click:function(r){return t.goToRoute(e.id)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-5"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-1"},[r("lock",{attrs:{stateFromParent:e.isLocked,id:e.id},on:{lockThreadFromChild:t.lockThread}})],1),r("div",{staticClass:"col col-11"},[r("h4",{staticClass:"item-title text-left"},[t._v(" "+t._s(e.title)+" ")])])])]),r("div",{staticClass:"col col-7"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col offset-10 col-2 text-right"},[t.isModerator?r("span",{staticClass:"pl-1 material-icons align-middle delete-icon",on:{click:function(r){return r.stopPropagation(),t.deleteThread(e.id)}}},[t._v("delete")]):t._e()])])])])])})),0),t.modalState?r("new-thread",{on:{sendDataToParent:t.makeNewThread,closeModal:t.toggleModal}}):t._e()],1)},n=[],s=(r("99af"),r("caad"),r("a9e3"),r("d3b7"),r("2532"),r("96cf"),r("1da1")),o=r("d4ec"),i=r("bee2"),c=r("262e"),u=r("2caf"),l=r("9ab4"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shadow-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("h5",{staticClass:"modal-title"},[t._v("Create New Thread")]),r("button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:t.closeModal}},[r("i",{staticClass:"material-icons align-middle"},[t._v("clear")])])]),r("div",{staticClass:"modal-body"},[r("form",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"threadNameInput"}},[t._v("Thread name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{type:"text",id:"threadNameInput","aria-describedby":"NameOfThread",placeholder:"New Thread...",disabled:t.isGuest,required:""},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])]),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-danger",on:{click:t.closeModal}},[t._v("Cancel")]),r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isGuest},on:{click:t.createThread}},[t._v(" "+t._s(t.isGuest?"Log in to post":"Create Thread")+" ")])])])])])},f=[],h=r("2b0e"),p=r("60a3"),b=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.content="",t}return Object(i["a"])(r,[{key:"closeModal",value:function(){this.$emit("closeModal")}},{key:"createThread",value:function(){this.isGuest||this.$emit("sendDataToParent",this.content)}},{key:"isGuest",get:function(){return!!this.$store.state.currentUser.roles.includes("guest")&&(this.content="Guests can't create new threads...",!0)}}]),r}(h["a"]);b=Object(l["a"])([p["a"]],b);var m=b,v=m,g=(r("2475"),r("2877")),k=Object(g["a"])(v,d,f,!1,null,"0518af4a",null),y=k.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.state||t.isModerator?r("span",{staticClass:"material-icons",on:{click:function(e){return e.stopPropagation(),t.lockThread(e)}}},[t._v(" "+t._s(t.state?"lock":"lock_open")+" ")]):t._e()},T=[],N=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.state=!1,t}return Object(i["a"])(r,[{key:"lockThread",value:function(){this.isModerator&&(this.state=!this.state,this.$emit("lockThreadFromChild",{state:this.state,id:this.id}))}},{key:"created",value:function(){this.state=1===this.stateFromParent}},{key:"isModerator",get:function(){return this.$store.getters["isModerator"]}}]),r}(h["a"]);Object(l["a"])([Object(p["b"])({type:Number})],N.prototype,"stateFromParent",void 0),Object(l["a"])([Object(p["b"])({type:Number})],N.prototype,"id",void 0),N=Object(l["a"])([p["a"]],N);var O=N,_=O,w=Object(g["a"])(_,C,T,!1,null,"52de8210",null),j=w.exports,I=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.modalState=!1,t}return Object(i["a"])(r,[{key:"toggleModal",value:function(){this.modalState=!this.modalState}},{key:"currentRoute",value:function(){return this.$route.path}},{key:"goToRoute",value:function(t){this.$router.push("".concat(this.currentRoute(),"/").concat(t))}},{key:"deleteThread",value:function(t){this.$store.dispatch("deleteThread",t)}},{key:"lockThread",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isModerator){t.next=2;break}return t.abrupt("return");case 2:return r={id:Number(e.id),subforum:this.$route.params.subforum,isLocked:0},e.state?r.isLocked=1:r.isLocked=0,t.next=6,fetch("/api/threads/"+r.id,{method:"PUT",headers:{"Content-Type":"Application/json","subforum-id":"".concat(this.$route.params.subforum)},body:JSON.stringify(r)}).then((function(t){if(200===t.status)return t.json();console.error("Error when updating thread")})).catch((function(t){return console.error(t)}));case 6:return t.abrupt("return","");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"makeNewThread",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.user.roles.includes("user")){t.next=2;break}return t.abrupt("return");case 2:return r={content:e,subForumId:this.$route.params.subforum},t.next=5,fetch("/api/threads",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify(r)}).then((function(t){if(201===t.status)return t.json();400===t.status&&console.error("Error when creating a new thread")})).then((function(t){var e=t.lastInsertRowid;a.goToRoute(e)})).catch((function(t){return console.error(t)}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.$store.dispatch("fetchThreadsWithSubForumId",this.$route.params.subforum)}},{key:"user",get:function(){return this.$store.state.currentUser}},{key:"isGuest",get:function(){return this.user.roles.includes("guest")}},{key:"isModerator",get:function(){return this.$store.getters["isModerator"]}},{key:"threadData",get:function(){return this.$store.state.threads||[]}}]),r}(h["a"]);I=Object(l["a"])([Object(p["a"])({components:{NewThread:y,Lock:j}})],I);var M=I,$=M,x=(r("f54b"),Object(g["a"])($,a,n,!1,null,"afc5e082",null));e["default"]=x.exports},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var s,o;return n&&"function"==typeof(s=e.constructor)&&s!==r&&a(o=s.prototype)&&o!==r.prototype&&n(t,o),t}},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("94ca"),o=r("6eeb"),i=r("5135"),c=r("c6b6"),u=r("7156"),l=r("c04e"),d=r("d039"),f=r("7c73"),h=r("241c").f,p=r("06cf").f,b=r("9bf2").f,m=r("58a8").trim,v="Number",g=n[v],k=g.prototype,y=c(f(k))==v,C=function(t){var e,r,a,n,s,o,i,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(s=u.slice(2),o=s.length,i=0;i<o;i++)if(c=s.charCodeAt(i),c<48||c>n)return NaN;return parseInt(s,a)}return+u};if(s(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var T,N=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof N&&(y?d((function(){k.valueOf.call(r)})):c(r)!=v)?u(new g(C(e)),r,N):C(e)},O=a?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;O.length>_;_++)i(g,T=O[_])&&!i(N,T)&&b(N,T,p(g,T));N.prototype=k,k.constructor=N,o(n,v,N)}},f54b:function(t,e,r){"use strict";r("0ccf")}}]);
//# sourceMappingURL=chunk-425bde01.986103e5.js.map